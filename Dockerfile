FROM node:16.14.0

ARG PORT
ARG ENCRYPTION_KEY
ARG JWT_SIGNING_KEY
ARG DB_HOST
ARG DB_NAME
ARG DB_PROTOCOL
ARG DB_PORT

ENV PORT=$PORT
ENV ENCRYPTION_KEY=$ENCRYPTION_KEY
ENV JWT_SIGNING_KEY=$JWT_SIGNING_KEY
ENV DB_HOST=$DB_HOST
ENV DB_NAME=$DB_NAME
ENV DB_PROTOCOL=$DB_PROTOCOL
ENV DB_PORT=$DB_PORT

WORKDIR /app

COPY package*.json ./

RUN npm install

COPY . .

EXPOSE $PORT

CMD ["node", "."]
